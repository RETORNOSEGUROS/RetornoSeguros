<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Retorno Seguros</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDlbEZfA_uAR1aoPZIr8T9B6KNcrwfMxm0",
      authDomain: "retorno-seguros.firebaseapp.com",
      projectId: "retorno-seguros",
      storageBucket: "retorno-seguros.appspot.com",
      messagingSenderId: "495712392972",
      appId: "1:495712392972:web:e1e78aedc48bdeea48db29",
      measurementId: "G-C6E44WXLPW"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 50px;
    }
    h2 { color: #1b2c5c; }
    input {
      width: 280px;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      background-color: #1b2c5c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #2e4479;
    }
    p {
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h2>Criar conta</h2>
  <input type="text" id="nome" placeholder="Nome completo">
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="senha" placeholder="Senha">
  <input type="text" id="cidade" placeholder="Cidade">
  <input type="text" id="estado" placeholder="Estado">
  <input type="text" id="telefone" placeholder="Telefone">
  <button onclick="cadastrar()">Cadastrar</button>
  <p>JÃ¡ tem conta? <a href="login.html">Fazer login</a></p>

  <script>
    function cadastrar() {
      const nome = document.getElementById('nome').value;
      const email = document.getElementById('email').value;
      const senha = document.getElementById('senha').value;
      const cidade = document.getElementById('cidade').value;
      const estado = document.getElementById('estado').value;
      const telefone = document.getElementById('telefone').value;

      auth.createUserWithEmailAndPassword(email, senha)
        .then(cred => {
          return db.collection('usuarios').doc(cred.user.uid).set({
            nome,
            email,
            cidade,
            estado,
            telefone,
            dataCadastro: firebase.firestore.FieldValue.serverTimestamp(),
            isCliente: false,
            pontos: 0
          });
        })
        .then(() => {
          alert('Cadastro realizado com sucesso!');
          window.location.href = 'painel.html';
        })
        .catch(error => {
          alert(error.message);
        });
    }
  </script>
</body>
</html>
