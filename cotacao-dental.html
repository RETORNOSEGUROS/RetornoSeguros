<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cota√ß√£o Plano Dental Empresarial | Retorno Seguros</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0088aa;
            --primary-dark: #006680;
            --secondary: #00b8d4;
            --dark-blue: #004d66;
            --light-bg: #f0f9fb;
            --white: #ffffff;
            --text-dark: #1a2b3c;
            --text-light: #5a6b7c;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --purple: #8b5cf6;
            --dental-primary: #00a8cc;
            --dental-secondary: #00d4aa;
            --shadow: 0 4px 20px rgba(0, 136, 170, 0.15);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: linear-gradient(135deg, var(--light-bg) 0%, #e6f7f4 100%);
            min-height: 100vh;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        .header {
            background: var(--white);
            padding: 1rem 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--dental-primary), var(--dental-secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 1.2rem;
        }

        .logo-text-container {
            display: flex;
            flex-direction: column;
        }

        .logo-text {
            font-weight: 800;
            font-size: 1.3rem;
            color: var(--text-dark);
            letter-spacing: -0.5px;
        }

        .logo-sub {
            font-size: 0.7rem;
            color: var(--dental-primary);
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .progress-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .progress-bar-wrapper {
            background: rgba(0, 168, 204, 0.15);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .progress-bar-fill {
            background: linear-gradient(90deg, var(--dental-primary), var(--dental-secondary));
            height: 100%;
            border-radius: 10px;
            transition: width 0.4s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .main-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 0 1.5rem 3rem;
        }

        .step-card {
            background: var(--white);
            border-radius: 20px;
            padding: 2rem 1.5rem;
            box-shadow: var(--shadow);
            display: none;
            animation: slideIn 0.4s ease;
        }

        .step-card.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, rgba(0, 168, 204, 0.1), rgba(0, 212, 170, 0.1));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
        }

        .step-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .step-subtitle {
            text-align: center;
            font-size: 0.95rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1.25rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--dental-primary);
            box-shadow: 0 0 0 4px rgba(0, 168, 204, 0.1);
        }

        .form-input::placeholder {
            color: #a0aec0;
        }

        .btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--dental-primary), var(--dental-secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 168, 204, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-light);
            border: 2px solid #e2e8f0;
            margin-top: 0.75rem;
        }

        .btn-secondary:hover {
            background: var(--light-bg);
            border-color: var(--dental-primary);
            color: var(--dental-primary);
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .option-card {
            background: var(--light-bg);
            border: 2px solid transparent;
            border-radius: 14px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-card:hover {
            border-color: var(--dental-primary);
            transform: translateY(-2px);
        }

        .option-card.selected {
            border-color: var(--dental-primary);
            background: rgba(0, 168, 204, 0.1);
        }

        .option-card .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .option-card .title {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .option-card .subtitle {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Coverage List */
        .coverage-list {
            margin-bottom: 1.5rem;
        }

        .coverage-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            background: var(--light-bg);
            border-radius: 12px;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .coverage-item:hover {
            transform: translateX(5px);
        }

        .coverage-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--dental-primary), var(--dental-secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .coverage-content {
            flex: 1;
        }

        .coverage-title {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .coverage-desc {
            font-size: 0.85rem;
            color: var(--text-light);
            line-height: 1.4;
        }

        /* Benefits Grid */
        .benefits-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(0, 168, 204, 0.05), rgba(0, 212, 170, 0.05));
            border-radius: 12px;
            border-left: 4px solid var(--dental-secondary);
        }

        .benefit-icon {
            width: 50px;
            height: 50px;
            background: var(--white);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .benefit-content {
            flex: 1;
        }

        .benefit-title {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-dark);
            margin-bottom: 0.15rem;
        }

        .benefit-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Process Flow */
        .process-flow {
            margin: 2rem 0;
        }

        .process-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateX(-20px);
            animation: flowIn 0.5s ease forwards;
        }

        .process-step:nth-child(1) { animation-delay: 0.3s; }
        .process-step:nth-child(2) { animation-delay: 0.8s; }
        .process-step:nth-child(3) { animation-delay: 1.3s; }
        .process-step:nth-child(4) { animation-delay: 1.8s; }

        @keyframes flowIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .process-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--dental-primary), var(--dental-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .process-content {
            flex: 1;
            padding: 1rem;
            background: var(--light-bg);
            border-radius: 12px;
        }

        .process-title {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .process-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Loading Animation */
        .loading-container {
            text-align: center;
            padding: 2rem 0;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 168, 204, 0.2);
            border-top-color: var(--dental-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.1rem;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Result Card */
        .result-card {
            background: linear-gradient(135deg, var(--dental-primary), #007799);
            border-radius: 20px;
            padding: 2rem;
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .result-value {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 0.25rem;
        }

        .result-value small {
            font-size: 1rem;
            font-weight: 500;
        }

        .result-installment {
            font-size: 1rem;
            opacity: 0.9;
        }

        .result-note {
            font-size: 0.85rem;
            opacity: 0.85;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        .result-promise {
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .result-promise strong {
            display: block;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        /* Summary */
        .summary-section {
            background: var(--light-bg);
            border-radius: 14px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .summary-title {
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 1rem;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: var(--text-light);
        }

        .summary-value {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Tip Box */
        .tip-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(0, 212, 170, 0.1));
            border: 2px solid var(--dental-secondary);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .tip-box-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tip-box-header span {
            font-weight: 700;
            color: var(--success);
        }

        .tip-box p {
            font-size: 0.85rem;
            color: var(--text-dark);
            line-height: 1.5;
        }

        /* WhatsApp Button */
        .whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            width: 100%;
            padding: 1.25rem;
            background: #25D366;
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            margin-bottom: 0.75rem;
        }

        .whatsapp-btn:hover {
            background: #20bd5a;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-btn svg {
            width: 24px;
            height: 24px;
        }

        /* Dependentes Section */
        .dependentes-info {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.05));
            border: 2px solid var(--purple);
            border-radius: 14px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .dependentes-info .icon-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .dependentes-info .icon-header span {
            font-size: 1.5rem;
        }

        .dependentes-info .title {
            font-weight: 700;
            color: var(--purple);
            font-size: 1rem;
        }

        .dependentes-info p {
            font-size: 0.9rem;
            color: var(--text-dark);
            line-height: 1.5;
        }

        .dependentes-info strong {
            color: var(--purple);
        }

        /* Range Prices */
        .price-ranges {
            margin-bottom: 1.5rem;
        }

        .price-range-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: var(--light-bg);
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }

        .price-range-item.active {
            background: linear-gradient(135deg, rgba(0, 168, 204, 0.15), rgba(0, 212, 170, 0.1));
            border: 2px solid var(--dental-primary);
        }

        .price-range-label {
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        .price-range-value {
            font-weight: 700;
            color: var(--dental-primary);
            font-size: 1rem;
        }

        /* Footer */
        .footer-note {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
        }

        /* Referral Banner */
        .referral-banner {
            background: linear-gradient(135deg, var(--dental-primary), var(--dental-secondary));
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
        }

        .referral-banner .icon {
            font-size: 2rem;
        }

        .referral-banner .content {
            flex: 1;
        }

        .referral-banner .title {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .referral-banner .text {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        @media (max-width: 480px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .step-title {
                font-size: 1.3rem;
            }
            
            .result-value {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">ü¶∑</div>
                <div class="logo-text-container">
                    <span class="logo-text">Retorno</span>
                    <span class="logo-sub">Plano Dental Empresarial</span>
                </div>
            </a>
        </div>
    </header>

    <div class="progress-container">
        <div class="progress-bar-wrapper">
            <div class="progress-bar-fill" id="progressBar" style="width: 14%"></div>
        </div>
        <div class="progress-text" id="progressText">Etapa 1 de 7</div>
    </div>

    <main class="main-container">
        <!-- Step 1: Nome da Empresa -->
        <div class="step-card active" id="step1">
            <div class="step-icon">üè¢</div>
            <h2 class="step-title">Ol√°! Vamos come√ßar?</h2>
            <p class="step-subtitle">Qual o nome da sua empresa? Assim podemos personalizar sua cota√ß√£o de plano dental empresarial.</p>
            
            <div class="form-group">
                <label class="form-label">Nome da empresa</label>
                <input type="text" class="form-input" id="nomeEmpresa" placeholder="Raz√£o social ou nome fantasia">
            </div>
            
            <button class="btn btn-primary" onclick="nextStep(1)">Continuar ‚Üí</button>
        </div>

        <!-- Step 2: N√∫mero de Funcion√°rios -->
        <div class="step-card" id="step2">
            <div class="step-icon">üë•</div>
            <h2 class="step-title">Quantos funcion√°rios?</h2>
            <p class="step-subtitle">Informe o n√∫mero de colaboradores que ser√£o beneficiados com o plano dental.</p>
            
            <div class="form-group">
                <label class="form-label">N√∫mero de funcion√°rios</label>
                <input type="number" class="form-input" id="funcionarios" placeholder="Ex: 50" min="1">
            </div>
            
            <div class="tip-box" style="margin-top: 1rem;">
                <div class="tip-box-header">
                    <span>üí°</span>
                    <span>Quanto mais funcion√°rios, menor o custo!</span>
                </div>
                <p>Empresas com mais colaboradores conseguem condi√ß√µes especiais. Vamos calcular o melhor valor para voc√™!</p>
            </div>
            
            <button class="btn btn-primary" onclick="nextStep(2)">Continuar ‚Üí</button>
            <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê Voltar</button>
        </div>

        <!-- Step 3: Dependentes -->
        <div class="step-card" id="step3">
            <div class="step-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
            <h2 class="step-title">E os dependentes?</h2>
            <p class="step-subtitle">H√° interesse em incluir dependentes no plano?</p>
            
            <div class="dependentes-info">
                <div class="icon-header">
                    <span>üí°</span>
                    <span class="title">Voc√™ sabia?</span>
                </div>
                <p>A empresa pode <strong>arcar com os custos do plano</strong> para os colaboradores e <strong>descontar em folha</strong> o custo dos dependentes. Uma forma pr√°tica de oferecer benef√≠cios para toda a fam√≠lia!</p>
            </div>
            
            <div class="options-grid">
                <div class="option-card" onclick="selectDependentes('sim')">
                    <div class="icon">‚úÖ</div>
                    <div class="title">Sim, incluir</div>
                    <div class="subtitle">C√¥njuge e filhos</div>
                </div>
                <div class="option-card" onclick="selectDependentes('nao')">
                    <div class="icon">üë§</div>
                    <div class="title">N√£o, s√≥ titulares</div>
                    <div class="subtitle">Apenas funcion√°rios</div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="nextStep(3)" id="btnStep3" disabled>Continuar ‚Üí</button>
            <button class="btn btn-secondary" onclick="prevStep(3)">‚Üê Voltar</button>
        </div>

        <!-- Step 4: Coberturas -->
        <div class="step-card" id="step4">
            <div class="step-icon">üõ°Ô∏è</div>
            <h2 class="step-title">Coberturas do Plano</h2>
            <p class="step-subtitle">Conhe√ßa tudo que est√° incluso no seu plano dental empresarial.</p>
            
            <div class="coverage-list">
                <div class="coverage-item">
                    <div class="coverage-icon">üîç</div>
                    <div class="coverage-content">
                        <div class="coverage-title">Consultas e Emerg√™ncias</div>
                        <div class="coverage-desc">Atendimento ilimitado para consultas de rotina, avalia√ß√µes e urg√™ncias odontol√≥gicas 24h.</div>
                    </div>
                </div>
                
                <div class="coverage-item">
                    <div class="coverage-icon">ü¶∑</div>
                    <div class="coverage-content">
                        <div class="coverage-title">Restaura√ß√µes</div>
                        <div class="coverage-desc">Tratamento completo de c√°ries com materiais de qualidade. Restaura√ß√µes em resina ou am√°lgama.</div>
                    </div>
                </div>
                
                <div class="coverage-item">
                    <div class="coverage-icon">‚ú®</div>
                    <div class="coverage-content">
                        <div class="coverage-title">Limpeza e Aplica√ß√£o de Fl√∫or</div>
                        <div class="coverage-desc">Profilaxia dental completa e aplica√ß√£o de fl√∫or para preven√ß√£o de c√°ries e manuten√ß√£o da sa√∫de bucal.</div>
                    </div>
                </div>
                
                <div class="coverage-item">
                    <div class="coverage-icon">üìã</div>
                    <div class="coverage-content">
                        <div class="coverage-title">Documenta√ß√£o Ortod√¥ntica Completa</div>
                        <div class="coverage-desc">Radiografias panor√¢micas, cefalom√©tricas e toda documenta√ß√£o necess√°ria para tratamentos ortod√¥nticos.</div>
                    </div>
                </div>
                
                <div class="coverage-item">
                    <div class="coverage-icon">üè•</div>
                    <div class="coverage-content">
                        <div class="coverage-title">Pr√≥tese Dent√°ria</div>
                        <div class="coverage-desc">Cobertura para pr√≥teses parciais e totais, devolvendo fun√ß√£o e est√©tica ao sorriso dos colaboradores.</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="nextStep(4)">Continuar ‚Üí</button>
            <button class="btn btn-secondary" onclick="prevStep(4)">‚Üê Voltar</button>
        </div>

        <!-- Step 5: Benef√≠cios -->
        <div class="step-card" id="step5">
            <div class="step-icon">‚≠ê</div>
            <h2 class="step-title">Vantagens Exclusivas</h2>
            <p class="step-subtitle">Al√©m das coberturas, seu plano conta com benef√≠cios especiais.</p>
            
            <div class="benefits-grid">
                <div class="benefit-item">
                    <div class="benefit-icon">üì±</div>
                    <div class="benefit-content">
                        <div class="benefit-title">Carteirinha Digital</div>
                        <div class="benefit-desc">Acesso r√°pido pelo celular, sem precisar de cart√£o f√≠sico</div>
                    </div>
                </div>
                
                <div class="benefit-item">
                    <div class="benefit-icon">üíª</div>
                    <div class="benefit-content">
                        <div class="benefit-title">Movimenta√ß√£o Online</div>
                        <div class="benefit-desc">Inclus√£o e exclus√£o de funcion√°rios 100% digital e simplificada</div>
                    </div>
                </div>
                
                <div class="benefit-item">
                    <div class="benefit-icon">üáßüá∑</div>
                    <div class="benefit-content">
                        <div class="benefit-title">Cobertura Nacional</div>
                        <div class="benefit-desc">Rede credenciada em todo o Brasil para seus colaboradores</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="nextStep(5)">Continuar ‚Üí</button>
            <button class="btn btn-secondary" onclick="prevStep(5)">‚Üê Voltar</button>
        </div>

        <!-- Step 6: Como Funciona (Loading) -->
        <div class="step-card" id="step6">
            <div class="step-icon">üîÑ</div>
            <h2 class="step-title">Veja como √© f√°cil!</h2>
            <p class="step-subtitle">Enquanto analisamos o plano ideal para sua empresa, veja como funciona para o colaborador:</p>
            
            <div class="process-flow">
                <div class="process-step">
                    <div class="process-number">1</div>
                    <div class="process-content">
                        <div class="process-title">Pesquisa a rede credenciada</div>
                        <div class="process-desc">O funcion√°rio busca dentistas credenciados na sua cidade pelo app ou site</div>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="process-number">2</div>
                    <div class="process-content">
                        <div class="process-title">Agenda a consulta</div>
                        <div class="process-desc">Escolhe o profissional e hor√°rio que preferir, sem burocracia</div>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="process-number">3</div>
                    <div class="process-content">
                        <div class="process-title">Informa a carteirinha</div>
                        <div class="process-desc">Na recep√ß√£o, apresenta o n√∫mero da carteirinha digital</div>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="process-number">4</div>
                    <div class="process-content">
                        <div class="process-title">Pronto! Sem custo adicional</div>
                        <div class="process-desc">Realiza o procedimento coberto sem pagar nada a mais</div>
                    </div>
                </div>
            </div>
            
            <div class="loading-container" id="loadingContainer">
                <div class="loading-spinner"></div>
                <div class="loading-text">Calculando melhor proposta...</div>
                <div class="loading-subtext">Isso leva apenas alguns segundos</div>
            </div>
        </div>

        <!-- Step 7: Resultado -->
        <div class="step-card" id="step7">
            <div class="step-icon">üéâ</div>
            <h2 class="step-title">Sua Cota√ß√£o Estimada!</h2>
            <p class="step-subtitle">Preparamos uma estimativa personalizada para sua empresa.</p>
            
            <div class="result-card">
                <div class="result-label">Valor estimado por colaborador</div>
                <div class="result-value" id="resultValue">R$ 24,19</div>
                <div class="result-installment">por pessoa / m√™s</div>
                <div class="result-note" id="resultNote">Para 50 funcion√°rios</div>
                <div class="result-promise">
                    <strong>‚ö†Ô∏è Valor sujeito √† an√°lise</strong>
                    Vamos trabalhar para chegar nesse custo, mas o valor final depende da an√°lise da seguradora.
                </div>
            </div>
            
            <div class="summary-section">
                <div class="summary-title">üìã Resumo da Cota√ß√£o</div>
                <div class="summary-item">
                    <span class="summary-label">Empresa</span>
                    <span class="summary-value" id="summaryEmpresa">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Funcion√°rios</span>
                    <span class="summary-value" id="summaryFuncionarios">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Dependentes</span>
                    <span class="summary-value" id="summaryDependentes">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Estimativa mensal total</span>
                    <span class="summary-value" id="summaryTotal">-</span>
                </div>
            </div>
            
            <div class="tip-box">
                <div class="tip-box-header">
                    <span>‚úÖ</span>
                    <span>Pr√≥ximo passo</span>
                </div>
                <p>Informe seus dados de contato para que nossa equipe finalize a an√°lise e envie a proposta completa.</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">Seu nome</label>
                <input type="text" class="form-input" id="nome" placeholder="Nome do respons√°vel pela cota√ß√£o">
            </div>
            
            <div class="form-group">
                <label class="form-label">CNPJ da Empresa</label>
                <input type="text" class="form-input" id="cnpj" placeholder="00.000.000/0000-00" oninput="formatCNPJ(this)">
            </div>
            
            <div class="form-group">
                <label class="form-label">WhatsApp para contato</label>
                <input type="tel" class="form-input" id="whatsapp" placeholder="(00) 00000-0000" oninput="formatPhone(this)">
            </div>
            
            <button class="btn btn-primary" onclick="enviarCotacao()" id="btnEnviar">Solicitar Proposta Completa</button>
            
            <a href="#" class="whatsapp-btn" id="whatsappLink" style="display: none;">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                Falar com Especialista no WhatsApp
            </a>
            
            <div class="referral-banner" style="display: none;" id="referralBanner">
                <div class="icon">üéÅ</div>
                <div class="content">
                    <div class="title">Indicou a empresa? N√£o esque√ßa!</div>
                    <div class="text">Se voc√™ foi indicado, informe o c√≥digo do indicador para garantir benef√≠cios.</div>
                </div>
            </div>
            
            <div class="footer-note">
                Ao continuar, voc√™ concorda com nossa pol√≠tica de privacidade.<br>
                Retorno Seguros - Especialistas em benef√≠cios empresariais
            </div>
        </div>
    </main>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyDlbEZfA_uAR1aoPZIr8T9B6KNcrwfMxm0",
            authDomain: "retorno-seguros.firebaseapp.com",
            projectId: "retorno-seguros",
            storageBucket: "retorno-seguros.firebasestorage.app",
            messagingSenderId: "495712392972",
            appId: "1:495712392972:web:a59dc2c9edff29a66f5b2f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // State
        let currentStep = 1;
        const totalSteps = 7;
        let formData = {
            nome: '',
            funcionarios: 0,
            dependentes: '',
            nomeEmpresa: '',
            cnpj: '',
            whatsapp: ''
        };

        // URL params (indica√ß√£o)
        const urlParams = new URLSearchParams(window.location.search);
        const indicadorCodigo = urlParams.get('codigo') || urlParams.get('ref') || '';
        const indicadorNome = urlParams.get('nome') || '';

        // Update Progress
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `Etapa ${currentStep} de ${totalSteps}`;
        }

        // Show Step
        function showStep(step) {
            document.querySelectorAll('.step-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById(`step${step}`).classList.add('active');
            currentStep = step;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Next Step
        function nextStep(current) {
            if (current === 1) {
                const nomeEmpresa = document.getElementById('nomeEmpresa').value.trim();
                if (!nomeEmpresa) {
                    alert('Por favor, informe o nome da empresa.');
                    return;
                }
                formData.nomeEmpresa = nomeEmpresa;
            }
            
            if (current === 2) {
                const funcionarios = parseInt(document.getElementById('funcionarios').value);
                if (!funcionarios || funcionarios < 1) {
                    alert('Por favor, informe o n√∫mero de funcion√°rios.');
                    return;
                }
                formData.funcionarios = funcionarios;
            }
            
            if (current === 3) {
                if (!formData.dependentes) {
                    alert('Por favor, selecione uma op√ß√£o.');
                    return;
                }
            }
            
            if (current === 5) {
                // Go to loading step
                showStep(6);
                // Simulate loading and show result (9 segundos)
                setTimeout(() => {
                    calculateResult();
                    showStep(7);
                }, 9000);
                return;
            }
            
            showStep(current + 1);
        }

        // Previous Step
        function prevStep(current) {
            if (current > 1) {
                showStep(current - 1);
            }
        }

        // Select Dependentes
        function selectDependentes(opcao) {
            formData.dependentes = opcao;
            document.querySelectorAll('#step3 .option-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
            document.getElementById('btnStep3').disabled = false;
        }

        // Calculate Result
        function calculateResult() {
            const funcionarios = formData.funcionarios;
            let precoPerCapita = 27.42;
            
            if (funcionarios <= 29) {
                precoPerCapita = 27.42;
            } else if (funcionarios <= 99) {
                precoPerCapita = 24.19;
            } else if (funcionarios <= 199) {
                precoPerCapita = 18.15;
            } else {
                precoPerCapita = 14.16;
            }
            
            const totalMensal = precoPerCapita * funcionarios;
            
            document.getElementById('resultValue').textContent = `R$ ${precoPerCapita.toFixed(2).replace('.', ',')}`;
            document.getElementById('resultNote').textContent = `Para ${funcionarios} funcion√°rios`;
            
            document.getElementById('summaryEmpresa').textContent = formData.nomeEmpresa;
            document.getElementById('summaryFuncionarios').textContent = funcionarios;
            document.getElementById('summaryDependentes').textContent = formData.dependentes === 'sim' ? 'Sim, incluir' : 'N√£o, s√≥ titulares';
            document.getElementById('summaryTotal').textContent = `R$ ${totalMensal.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
            
            // Show referral banner if came from indication
            if (indicadorCodigo) {
                document.getElementById('referralBanner').style.display = 'flex';
            }
        }

        // Format CNPJ
        function formatCNPJ(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 14) value = value.slice(0, 14);
            
            if (value.length > 12) {
                value = value.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, '$1.$2.$3/$4-$5');
            } else if (value.length > 8) {
                value = value.replace(/(\d{2})(\d{3})(\d{3})(\d{0,4})/, '$1.$2.$3/$4');
            } else if (value.length > 5) {
                value = value.replace(/(\d{2})(\d{3})(\d{0,3})/, '$1.$2.$3');
            } else if (value.length > 2) {
                value = value.replace(/(\d{2})(\d{0,3})/, '$1.$2');
            }
            
            input.value = value;
        }

        // Format Phone
        function formatPhone(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 11) value = value.slice(0, 11);
            
            if (value.length > 6) {
                value = value.replace(/(\d{2})(\d{5})(\d{0,4})/, '($1) $2-$3');
            } else if (value.length > 2) {
                value = value.replace(/(\d{2})(\d{0,5})/, '($1) $2');
            }
            
            input.value = value;
        }

        // Enviar Cota√ß√£o
        async function enviarCotacao() {
            const nome = document.getElementById('nome').value.trim();
            const cnpj = document.getElementById('cnpj').value.trim();
            const whatsapp = document.getElementById('whatsapp').value.trim();
            
            if (!nome) {
                alert('Por favor, informe seu nome.');
                return;
            }
            
            if (!cnpj || cnpj.length < 18) {
                alert('Por favor, informe o CNPJ completo.');
                return;
            }
            
            if (!whatsapp || whatsapp.length < 14) {
                alert('Por favor, informe um WhatsApp v√°lido.');
                return;
            }
            
            formData.nome = nome;
            formData.cnpj = cnpj;
            formData.whatsapp = whatsapp;
            
            const btn = document.getElementById('btnEnviar');
            btn.disabled = true;
            btn.textContent = 'Enviando...';
            
            try {
                // Calculate price
                const funcionarios = formData.funcionarios;
                let precoPerCapita = 27.42;
                if (funcionarios <= 29) precoPerCapita = 27.42;
                else if (funcionarios <= 99) precoPerCapita = 24.19;
                else if (funcionarios <= 199) precoPerCapita = 18.15;
                else precoPerCapita = 14.16;
                
                // Save to Firebase - Empresa como lead principal
                await db.collection('leads_crm').add({
                    // Dados do contato/solicitante
                    nome: formData.nome,
                    whatsapp: formData.whatsapp.replace(/\D/g, ''),
                    
                    // Dados da empresa
                    nomeEmpresa: formData.nomeEmpresa,
                    cnpj: formData.cnpj,
                    funcionarios: formData.funcionarios,
                    dependentes: formData.dependentes,
                    
                    // Dados comerciais
                    valorCotacao: precoPerCapita,
                    valorPremio: precoPerCapita * funcionarios,
                    
                    // Classifica√ß√£o
                    ramo: 'dental',
                    tipo: 'empresarial',
                    status: 'pre_cadastro',
                    origem: 'site',
                    
                    // Indica√ß√£o (se houver)
                    indicadoPorCodigo: indicadorCodigo || null,
                    indicadoPorNome: indicadorNome || null,
                    
                    // Timestamps
                    criadoEm: firebase.firestore.FieldValue.serverTimestamp(),
                    dataCadastro: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Show WhatsApp button
                btn.style.display = 'none';
                const whatsappLink = document.getElementById('whatsappLink');
                whatsappLink.style.display = 'flex';
                
                // Create WhatsApp message
                const whatsNum = '5554996135668';
                const msg = `Ol√°! Sou ${formData.nome} da empresa *${formData.nomeEmpresa}* e acabei de fazer uma cota√ß√£o de Plano Dental Empresarial no site.%0A%0A` +
                    `üìä *Dados da cota√ß√£o:*%0A` +
                    `‚Ä¢ Empresa: ${formData.nomeEmpresa}%0A` +
                    `‚Ä¢ CNPJ: ${formData.cnpj}%0A` +
                    `‚Ä¢ Funcion√°rios: ${formData.funcionarios}%0A` +
                    `‚Ä¢ Dependentes: ${formData.dependentes === 'sim' ? 'Sim' : 'N√£o'}%0A` +
                    `‚Ä¢ Valor estimado: R$ ${precoPerCapita.toFixed(2).replace('.', ',')} por pessoa/m√™s%0A%0A` +
                    `Gostaria de receber a proposta completa!`;
                
                whatsappLink.href = `https://wa.me/${whatsNum}?text=${msg}`;
                
                alert('‚úÖ Cota√ß√£o enviada com sucesso! Clique no bot√£o do WhatsApp para falar com um especialista.');
                
            } catch (error) {
                console.error('Erro ao salvar:', error);
                btn.disabled = false;
                btn.textContent = 'Solicitar Proposta Completa';
                alert('Erro ao enviar cota√ß√£o. Tente novamente.');
            }
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>
